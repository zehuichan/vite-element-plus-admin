var h=(d,u,n)=>new Promise((f,m)=>{var v=o=>{try{e(n.next(o))}catch(t){m(t)}},c=o=>{try{e(n.throw(o))}catch(t){m(t)}},e=o=>o.done?f(o.value):Promise.resolve(o.value).then(v,c);e((n=n.apply(d,u)).next())});import{u as C,r as x,a as b,c as k,o as q,b as B,d as r,w as p,e as E,f as F,g as K,h as i,i as N,j as _}from"./index-284e54f2.js";function P(d){return["admin","editor"].indexOf(d.trim())>=0}const S={class:"login-container"},z=i("div",{class:"title-container"},[i("h3",{class:"title"},"System Login")],-1),L=i("div",{class:"tips"},[i("span",{style:{"margin-right":"20px"}},"username: admin"),i("span",null,"password: any")],-1),M={__name:"index",setup(d){const u=C(),{currentRoute:n,replace:f}=N(),m=(l,a,s)=>{P(a)?s():s(new Error("Please enter the correct user name"))},v=(l,a,s)=>{a.length<6?s(new Error("The password can not be less than 6 digits")):s()},c=x(),e=b({username:"admin",password:"111111"}),o=b({username:[{required:!0,validator:m}],password:[{required:!0,validator:v}]}),t=x(!1),V=k(()=>n.value.query.redirect);function w(){return h(this,null,function*(){try{t.value=!0,(yield c.value.validate())&&(console.log("submit!"),yield u.login(e),yield f({path:V.value||"/"}),t.value=!1)}catch(l){console.log("error submit!",l),t.value=!1}})}return(l,a)=>{const s=_("el-input"),y=_("el-form-item"),U=_("el-button"),R=_("el-form");return q(),B("div",S,[r(R,{ref_key:"loginFormRef",ref:c,model:e,rules:o,class:"login-form","auto-complete":"on","label-position":"left",size:"large"},{default:p(()=>[z,r(y,{prop:"username"},{default:p(()=>[r(s,{modelValue:e.username,"onUpdate:modelValue":a[0]||(a[0]=g=>e.username=g),placeholder:"Username",name:"username",type:"text",tabindex:"1","auto-complete":"on",clearable:""},null,8,["modelValue"])]),_:1}),r(y,{prop:"password"},{default:p(()=>[r(s,{modelValue:e.password,"onUpdate:modelValue":a[1]||(a[1]=g=>e.password=g),type:"password",placeholder:"Password",name:"password",tabindex:"2","auto-complete":"on","show-password":"",clearable:"",onKeyup:E(w,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),r(U,{loading:t.value,type:"primary",size:"large",style:{width:"100%","margin-bottom":"30px"},onClick:F(w,["prevent"])},{default:p(()=>[K(" Login ")]),_:1},8,["loading","onClick"]),L]),_:1},8,["model","rules"])])}}};export{M as default};
