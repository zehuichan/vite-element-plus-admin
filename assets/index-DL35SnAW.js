var w=(t,c,s)=>new Promise((d,p)=>{var m=e=>{try{a(s.next(e))}catch(n){p(n)}},o=e=>{try{a(s.throw(e))}catch(n){p(n)}},a=e=>e.done?d(e.value):Promise.resolve(e.value).then(m,o);a((s=s.apply(t,c)).next())});import{_ as F,d as B,u as P,r as h,a as L,l as U,b as R,o as v,c as q,w as _,e as u,n as b,f as i,h as y,F as z,i as S,t as A,j as N,k as I,m as C,p as K,q as T,s as j,v as D,x as M,y as O,z as G,A as H}from"./index-BHlah-Nh.js";import{E as J}from"./el-popover-BXadrx5f.js";function Q(t){return["admin","editor"].indexOf(t.trim())>=0}const W=B({name:"AppLocalePicker",props:{reload:Boolean},setup(t){const{changeLocale:c,getLocale:s}=P(),d=h(L(s));function p(o){return w(this,null,function*(){yield c(o),d.value=o,t.reload&&location.reload()})}function m(o){L(s)!==o&&p(o)}return{localeList:U,selected:d,handleCommand:m}}}),X=["onClick"];function Y(t,c,s,d,p,m){const o=R("icon-park"),a=J;return v(),q(a,{"popper-class":"app-locale-picker"},{reference:_(()=>[u("div",{class:b(t.$attrs.class)},[i(o,{name:"translate"})],2)]),default:_(()=>[(v(!0),y(z,null,S(t.localeList,e=>(v(),y("div",{class:b(["app-locale-picker-item",{"is-active":t.selected==e.event}]),onClick:n=>t.handleCommand(e.event)},A(e.text),11,X))),256))]),_:1})}const Z=F(W,[["render",Y]]),ee={class:"login-container relative"},oe={class:"flex items-center absolute right-4 top-4 text-16px text-#fff"},ae=u("div",{class:"title-container"},[u("h3",{class:"title"},"System Login")],-1),te=u("div",{class:"tips"},[u("span",{style:{"margin-right":"20px"}},"username: admin"),u("span",null,"password: any")],-1),le={__name:"index",setup(t){const c=N(),{currentRoute:s,replace:d}=I(),p=(f,r,l)=>{Q(r)?l():l(new Error("Please enter the correct user name"))},m=(f,r,l)=>{r.length<6?l(new Error("The password can not be less than 6 digits")):l()},o=h(),a=C({username:"admin",password:"111111"}),e=C({username:[{required:!0,validator:p}],password:[{required:!0,validator:m}]}),n=h(!1),E=K(()=>s.value.query.redirect);function x(){return w(this,null,function*(){try{n.value=!0,(yield o.value.validate())&&(console.log("submit!"),yield c.login(a),yield d({path:E.value||"/"}),n.value=!1)}catch(f){console.log("error submit!",f),n.value=!1}})}return(f,r)=>{const l=M,k=O,V=G,$=H;return v(),y("div",ee,[u("div",oe,[i(Z)]),i($,{ref_key:"loginFormRef",ref:o,model:a,rules:e,class:"login-form","auto-complete":"on","label-position":"left",size:"large"},{default:_(()=>[ae,i(k,{prop:"username"},{default:_(()=>[i(l,{modelValue:a.username,"onUpdate:modelValue":r[0]||(r[0]=g=>a.username=g),placeholder:"Username",name:"username",type:"text",tabindex:"1","auto-complete":"on",clearable:""},null,8,["modelValue"])]),_:1}),i(k,{prop:"password"},{default:_(()=>[i(l,{modelValue:a.password,"onUpdate:modelValue":r[1]||(r[1]=g=>a.password=g),type:"password",placeholder:"Password",name:"password",tabindex:"2","auto-complete":"on","show-password":"",clearable:"",onKeyup:T(x,["enter"])},null,8,["modelValue"])]),_:1}),i(V,{loading:n.value,type:"primary",size:"large",style:{width:"100%","margin-bottom":"30px"},onClick:j(x,["prevent"])},{default:_(()=>[D(" Login ")]),_:1},8,["loading"]),te]),_:1},8,["model","rules"])])}}};export{le as default};
