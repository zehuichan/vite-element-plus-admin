var w=(t,c,s)=>new Promise((d,p)=>{var m=e=>{try{o(s.next(e))}catch(n){p(n)}},a=e=>{try{o(s.throw(e))}catch(n){p(n)}},o=e=>e.done?d(e.value):Promise.resolve(e.value).then(m,a);o((s=s.apply(t,c)).next())});import{_ as F,d as B,u as P,r as h,a as L,l as U,o as v,c as R,w as _,n as b,b as i,e as u,F as q,t as z,f as y,h as S,i as A,j as N,k as E,m as I,p as K,q as T,s as j,v as D,x as M,y as O,z as G,A as H}from"./index-A1Q-xROe.js";import{E as J}from"./el-popover-6C4tV_xt.js";function Q(t){return["admin","editor"].indexOf(t.trim())>=0}const W=B({name:"AppLocalePicker",props:{reload:Boolean},setup(t){const{changeLocale:c,getLocale:s}=P(),d=h(L(s));function p(a){return w(this,null,function*(){yield c(a),d.value=a,t.reload&&location.reload()})}function m(a){L(s)!==a&&p(a)}return{localeList:U,selected:d,handleCommand:m}}}),X=["onClick"];function Y(t,c,s,d,p,m){const a=A,o=J;return v(),R(o,{"popper-class":"app-locale-picker"},{reference:_(()=>[u("div",{class:b(t.$attrs.class)},[i(a,{name:"translate"})],2)]),default:_(()=>[(v(!0),y(q,null,S(t.localeList,e=>(v(),y("div",{class:b(["app-locale-picker-item",{"is-active":t.selected==e.event}]),onClick:n=>t.handleCommand(e.event)},z(e.text),11,X))),256))]),_:1})}const Z=F(W,[["render",Y]]),ee={class:"login-container relative"},ae={class:"flex items-center absolute right-4 top-4 text-16px text-#fff"},oe=u("div",{class:"title-container"},[u("h3",{class:"title"},"System Login")],-1),te=u("div",{class:"tips"},[u("span",{style:{"margin-right":"20px"}},"username: admin"),u("span",null,"password: any")],-1),le={__name:"index",setup(t){const c=N(),{currentRoute:s,replace:d}=D(),p=(f,r,l)=>{Q(r)?l():l(new Error("Please enter the correct user name"))},m=(f,r,l)=>{r.length<6?l(new Error("The password can not be less than 6 digits")):l()},a=h(),o=E({username:"admin",password:"111111"}),e=E({username:[{required:!0,validator:p}],password:[{required:!0,validator:m}]}),n=h(!1),V=I(()=>s.value.query.redirect);function x(){return w(this,null,function*(){try{n.value=!0,(yield a.value.validate())&&(console.log("submit!"),yield c.login(o),yield d({path:V.value||"/"}),n.value=!1)}catch(f){console.log("error submit!",f),n.value=!1}})}return(f,r)=>{const l=M,k=O,C=G,$=H;return v(),y("div",ee,[u("div",ae,[i(Z)]),i($,{ref_key:"loginFormRef",ref:a,model:o,rules:e,class:"login-form","auto-complete":"on","label-position":"left",size:"large"},{default:_(()=>[oe,i(k,{prop:"username"},{default:_(()=>[i(l,{modelValue:o.username,"onUpdate:modelValue":r[0]||(r[0]=g=>o.username=g),placeholder:"Username",name:"username",type:"text",tabindex:"1","auto-complete":"on",clearable:""},null,8,["modelValue"])]),_:1}),i(k,{prop:"password"},{default:_(()=>[i(l,{modelValue:o.password,"onUpdate:modelValue":r[1]||(r[1]=g=>o.password=g),type:"password",placeholder:"Password",name:"password",tabindex:"2","auto-complete":"on","show-password":"",clearable:"",onKeyup:K(x,["enter"])},null,8,["modelValue"])]),_:1}),i(C,{loading:n.value,type:"primary",size:"large",style:{width:"100%","margin-bottom":"30px"},onClick:T(x,["prevent"])},{default:_(()=>[j(" Login ")]),_:1},8,["loading"]),te]),_:1},8,["model","rules"])])}}};export{le as default};
