var h=(o,s,r)=>new Promise((i,c)=>{var e=a=>{try{n(r.next(a))}catch(l){c(l)}},t=a=>{try{n(r.throw(a))}catch(l){c(l)}},n=a=>a.done?i(a.value):Promise.resolve(a.value).then(e,t);n((r=r.apply(o,s)).next())});import{u as A,c as w,i as v,a as y,l as C,_ as U,b as S,s as j,d as z,e as O,r as x,f as q,h as _,o as L,j as D,w as g,k as m,n as $,m as p,p as k,F as M,q as N,t as T,v as H,x as K,y as R,z as W,A as G,B as J}from"./index-494b4da1.js";function Q(o){return["admin","editor"].indexOf(o.trim())>=0}function E(o){const s=A();v.mode==="legacy"?v.global.locale=o:v.global.locale.value=o,s.setLocaleInfo({locale:o}),j(o)}function X(){const o=A(),s=w(()=>o.getLocale),r=w(()=>o.getShowPicker),i=w(()=>{var e,t;return(t=(e=v.global.getLocaleMessage(y(s)))==null?void 0:e.frameworkLocale)!=null?t:{}});function c(e){return h(this,null,function*(){const t=v.global;if(y(t.locale)===e)return e;if(C.includes(e))return E(e),e;const a=(yield U(Object.assign({"./lang/en.js":()=>S(()=>import("./en-c5bb741d.js"),["assets/en-c5bb741d.js","assets/index-494b4da1.js","assets/index-445518d8.css"]),"./lang/zh_CN.js":()=>S(()=>import("./zh_CN-5af86f80.js"),["assets/zh_CN-5af86f80.js","assets/index-494b4da1.js","assets/index-445518d8.css"])}),`./lang/${e}.js`)).default;if(!a)return;const{message:l}=a;return t.setLocaleMessage(e,l),C.push(e),E(e),e})}return{getLocale:s,getShowLocalePicker:r,changeLocale:c,getFrameworkLocale:i}}const Y=O({name:"AppLocalePicker",props:{reload:Boolean},setup(o){const{changeLocale:s,getLocale:r}=X(),i=x(y(r));function c(t){return h(this,null,function*(){yield s(t),i.value=t,o.reload&&location.reload()})}function e(t){y(r)!==t&&c(t)}return{localeList:q,selected:i,handleCommand:e}}}),Z=["onClick"];function ee(o,s,r,i,c,e){const t=_("icon-park"),n=_("el-popover");return L(),D(n,{"popper-class":"app-locale-picker"},{reference:g(()=>[m("div",{class:$(o.$attrs.class)},[p(t,{name:"translate"})],2)]),default:g(()=>[(L(!0),k(M,null,N(o.localeList,a=>(L(),k("div",{class:$(["app-locale-picker-item",{"is-active":o.selected==a.event}]),onClick:l=>o.handleCommand(a.event)},T(a.text),11,Z))),256))]),_:1})}const oe=z(Y,[["render",ee]]);const te={class:"login-container relative"},ae={class:"flex items-center absolute right-4 top-4 text-16px text-#fff"},ne=m("div",{class:"title-container"},[m("h3",{class:"title"},"System Login")],-1),se=m("div",{class:"tips"},[m("span",{style:{"margin-right":"20px"}},"username: admin"),m("span",null,"password: any")],-1),ie={__name:"index",setup(o){const s=H(),{currentRoute:r,replace:i}=K(),c=(f,u,d)=>{Q(u)?d():d(new Error("Please enter the correct user name"))},e=(f,u,d)=>{u.length<6?d(new Error("The password can not be less than 6 digits")):d()},t=x(),n=R({username:"admin",password:"111111"}),a=R({username:[{required:!0,validator:c}],password:[{required:!0,validator:e}]}),l=x(!1),B=w(()=>r.value.query.redirect);function P(){return h(this,null,function*(){try{l.value=!0,(yield t.value.validate())&&(console.log("submit!"),yield s.login(n),yield i({path:B.value||"/"}),l.value=!1)}catch(f){console.log("error submit!",f),l.value=!1}})}return(f,u)=>{const d=_("el-input"),V=_("el-form-item"),F=_("el-button"),I=_("el-form");return L(),k("div",te,[m("div",ae,[p(oe)]),p(I,{ref_key:"loginFormRef",ref:t,model:n,rules:a,class:"login-form","auto-complete":"on","label-position":"left",size:"large"},{default:g(()=>[ne,p(V,{prop:"username"},{default:g(()=>[p(d,{modelValue:n.username,"onUpdate:modelValue":u[0]||(u[0]=b=>n.username=b),placeholder:"Username",name:"username",type:"text",tabindex:"1","auto-complete":"on",clearable:""},null,8,["modelValue"])]),_:1}),p(V,{prop:"password"},{default:g(()=>[p(d,{modelValue:n.password,"onUpdate:modelValue":u[1]||(u[1]=b=>n.password=b),type:"password",placeholder:"Password",name:"password",tabindex:"2","auto-complete":"on","show-password":"",clearable:"",onKeyup:W(P,["enter"])},null,8,["modelValue"])]),_:1}),p(F,{loading:l.value,type:"primary",size:"large",style:{width:"100%","margin-bottom":"30px"},onClick:G(P,["prevent"])},{default:g(()=>[J(" Login ")]),_:1},8,["loading"]),se]),_:1},8,["model","rules"])])}}};export{ie as default};
