var S=Object.defineProperty;var _=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var b=(t,e,n)=>e in t?S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,C=(t,e)=>{for(var n in e||(e={}))R.call(e,n)&&b(t,n,e[n]);if(_)for(var n of _(e))D.call(e,n)&&b(t,n,e[n]);return t};import{_ as E,d as I,r as p,p as g,bX as O,aJ as T,aA as B,aO as w,a as G,o as m,h as f,F as V,i as j,n as z,e as $,t as M,aC as X,s as F,Q as H,c2 as P,f as L,aX as W,c3 as J,ad as Q,c4 as U}from"./index-0876b9a2.js";const Y=I({name:"Contextmenu",props:{width:{type:Number,default:156},customEvent:{type:Object,default:null},styles:{type:Object},showIcon:{type:Boolean,default:!0},axis:{type:Object,default(){return{x:0,y:0}}},items:{type:Array,default(){return[]}}},setup(t){const e=p(null),n=p(!1),c=g(()=>{const{items:s}=t;return s.filter(o=>!o.hidden)}),r=g(()=>{const{axis:s,items:o,styles:a,width:d}=t,{x:u,y}=s||{x:0,y:0},x=(o||[]).length*40,v=d,h=document.body,A=h.clientWidth<u+v?u-v:u,N=h.clientHeight<y+x?y-x:y;return C({position:"absolute",width:`${d}px`,left:`${A+1}px`,top:`${N+1}px`,zIndex:9999},a)});function l(s,o){const{handler:a,disabled:d}=s;d||(n.value=!1,o==null||o.stopPropagation(),o==null||o.preventDefault(),a==null||a())}return O(e,s=>n.value=!1),T(()=>{B(()=>n.value=!0)}),w(()=>{const s=G(e);s&&document.body.removeChild(s)}),{wrapRef:e,showRef:n,visibleItems:c,getStyle:r,handleAction:l}}}),q=["onClick"];function K(t,e,n,c,r,l){return t.showRef?(m(),f("ul",{key:0,ref:"wrapRef",class:"contextmenu",style:X(t.getStyle),onContextmenu:e[0]||(e[0]=F(()=>{},["prevent","stop"]))},[(m(!0),f(V,null,j(t.visibleItems,s=>(m(),f("li",{key:s.event,class:z(["contextmenu-item",{"contextmenu-item__disabled":s.disabled}]),onClick:o=>t.handleAction(s,o)},[$("span",null,M(s.text),1)],10,q))),128))],36)):H("",!0)}const Z=E(Y,[["render",K]]),i={domList:[],resolve:J},ee=function(t){const{event:e}=t||{};if(e&&(e==null||e.preventDefault()),!!P)return new Promise(n=>{const c=document.body,r=document.createElement("div"),l={};t.styles&&(l.styles=t.styles),t.items&&(l.items=t.items),t.event&&(l.customEvent=e,l.axis={x:e.clientX,y:e.clientY});const s=L(Z,l);W(s,r),i.domList.push(r);const o=function(){i.domList.forEach(a=>{try{a&&c.removeChild(a)}catch(d){}})};i.resolve=function(a){o(),n(a)},o(),c.appendChild(r)})},k=function(){i&&(i.resolve(""),i.domList=[])};function te(t=!0){return Q()&&t&&w(()=>{k()}),[ee,k]}const ne={class:"m-12px"},se={class:"bg-#fff p-12px"},le={__name:"index",setup(t){const e=[{label:"date",prop:"date"},{label:"name",prop:"name"},{label:"address",prop:"address"}],n=p(null),c=p([{date:"2016-05-03",name:"Tom",address:"No. 189, Grove St, Los Angeles"},{date:"2016-05-02",name:"Tom",address:"No. 189, Grove St, Los Angeles"},{date:"2016-05-04",name:"Tom",address:"No. 189, Grove St, Los Angeles"},{date:"2016-05-01",name:"Tom",address:"No. 189, Grove St, Los Angeles"}]),[r]=te(),l=(s,o,a,d)=>{o.label==="name"&&r({event:d,items:[{text:"订单号",handler(){}},{text:"拼箱单号",handler(){}},{text:"工作单号",handler(){}},{text:"转运单",handler(){}}]})};return(s,o)=>(m(),f("div",ne,[$("div",se,[L(U,{ref_key:"tableRef",ref:n,columns:e,data:c.value,onCellClick:l},null,8,["data"])])]))}};export{le as default};
