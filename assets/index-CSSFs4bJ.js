var y=(d,u,r)=>new Promise((_,m)=>{var f=t=>{try{o(r.next(t))}catch(s){m(s)}},c=t=>{try{o(r.throw(t))}catch(s){m(s)}},o=t=>t.done?_(t.value):Promise.resolve(t.value).then(f,c);o((r=r.apply(d,u)).next())});import{b as E,e as U,f as R,r as v,h as F,o as k,c as q,i as l,j as n,w as p,k as B,l as P,m as C,n as I,p as N,q as S,s as z,t as K}from"./index-D9hjwZ6I.js";function L(d){return["admin","editor"].indexOf(d.trim())>=0}const T={class:"login-container relative"},j={class:"flex items-center absolute right-4 top-4 text-16px text-#fff"},M=l("div",{class:"title-container"},[l("h3",{class:"title"},"System Login")],-1),O=l("div",{class:"tips"},[l("span",{style:{"margin-right":"20px"}},"username: admin"),l("span",null,"password: any")],-1),G={__name:"index",setup(d){const u=E(),r=U(),_=R(),m=(i,e,a)=>{L(e)?a():a(new Error("Please enter the correct user name"))},f=(i,e,a)=>{e.length<6?a(new Error("The password can not be less than 6 digits")):a()},c=v(),o=F({username:"admin",password:"111111"}),t=v({username:[{required:!0,validator:m}],password:[{required:!0,validator:f}]}),s=v(!1);function w(){return y(this,null,function*(){var i;try{if(s.value=!0,yield c.value.validate()){console.log("submit!"),yield u.login(o);const a=decodeURIComponent(((i=r.query)==null?void 0:i.redirect)||"/");yield _.replace(a),s.value=!1}}catch(e){console.log("error submit!",e),s.value=!1}})}return(i,e)=>{const a=I,h=N,x=S,b=z,V=K;return k(),q("div",T,[l("div",j,[n(a)]),n(V,{ref_key:"loginFormRef",ref:c,model:o,rules:t.value,class:"login-form","auto-complete":"on","label-position":"left",size:"large"},{default:p(()=>[M,n(x,{prop:"username"},{default:p(()=>[n(h,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=g=>o.username=g),placeholder:"Username",name:"username",type:"text",tabindex:"1","auto-complete":"on",clearable:""},null,8,["modelValue"])]),_:1}),n(x,{prop:"password"},{default:p(()=>[n(h,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=g=>o.password=g),type:"password",placeholder:"Password",name:"password",tabindex:"2","auto-complete":"on","show-password":"",clearable:"",onKeyup:B(w,["enter"])},null,8,["modelValue"])]),_:1}),n(b,{loading:s.value,type:"primary",size:"large",style:{width:"100%","margin-bottom":"30px"},onClick:P(w,["prevent"])},{default:p(()=>[C(" Login ")]),_:1},8,["loading"]),O]),_:1},8,["model","rules"])])}}};export{G as default};
