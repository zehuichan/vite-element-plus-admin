var x=(d,u,r)=>new Promise((_,c)=>{var f=t=>{try{e(r.next(t))}catch(o){c(o)}},m=t=>{try{e(r.throw(t))}catch(o){c(o)}},e=t=>t.done?_(t.value):Promise.resolve(t.value).then(f,m);e((r=r.apply(d,u)).next())});import{b as F,e as R,r as y,f as b,h as k,o as q,c as B,i as l,j as n,w as p,k as N,l as P,m as S,n as z,p as C,q as I,s as K,t as L}from"./index-B6dkZqol.js";function T(d){return["admin","editor"].indexOf(d.trim())>=0}const j={class:"login-container relative"},M={class:"flex items-center absolute right-4 top-4 text-16px text-#fff"},O=l("div",{class:"title-container"},[l("h3",{class:"title"},"System Login")],-1),A=l("div",{class:"tips"},[l("span",{style:{"margin-right":"20px"}},"username: admin"),l("span",null,"password: any")],-1),H={__name:"index",setup(d){const u=F(),{currentRoute:r,replace:_}=R(),c=(i,a,s)=>{T(a)?s():s(new Error("Please enter the correct user name"))},f=(i,a,s)=>{a.length<6?s(new Error("The password can not be less than 6 digits")):s()},m=y(),e=b({username:"admin",password:"111111"}),t=b({username:[{required:!0,validator:c}],password:[{required:!0,validator:f}]}),o=y(!1),V=k(()=>r.value.query.redirect);function v(){return x(this,null,function*(){try{o.value=!0,(yield m.value.validate())&&(console.log("submit!"),yield u.login(e),yield _({path:V.value||"/"}),o.value=!1)}catch(i){console.log("error submit!",i),o.value=!1}})}return(i,a)=>{const s=z,w=C,h=I,E=K,U=L;return q(),B("div",j,[l("div",M,[n(s)]),n(U,{ref_key:"loginFormRef",ref:m,model:e,rules:t,class:"login-form","auto-complete":"on","label-position":"left",size:"large"},{default:p(()=>[O,n(h,{prop:"username"},{default:p(()=>[n(w,{modelValue:e.username,"onUpdate:modelValue":a[0]||(a[0]=g=>e.username=g),placeholder:"Username",name:"username",type:"text",tabindex:"1","auto-complete":"on",clearable:""},null,8,["modelValue"])]),_:1}),n(h,{prop:"password"},{default:p(()=>[n(w,{modelValue:e.password,"onUpdate:modelValue":a[1]||(a[1]=g=>e.password=g),type:"password",placeholder:"Password",name:"password",tabindex:"2","auto-complete":"on","show-password":"",clearable:"",onKeyup:N(v,["enter"])},null,8,["modelValue"])]),_:1}),n(E,{loading:o.value,type:"primary",size:"large",style:{width:"100%","margin-bottom":"30px"},onClick:P(v,["prevent"])},{default:p(()=>[S(" Login ")]),_:1},8,["loading"]),A]),_:1},8,["model","rules"])])}}};export{H as default};
