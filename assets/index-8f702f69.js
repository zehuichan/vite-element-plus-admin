var h=(d,u,r)=>new Promise((f,m)=>{var v=o=>{try{e(r.next(o))}catch(t){m(t)}},p=o=>{try{e(r.throw(o))}catch(t){m(t)}},e=o=>o.done?f(o.value):Promise.resolve(o.value).then(v,p);e((r=r.apply(d,u)).next())});import{ao as k,Y as z}from"./index-627e8659.js";import{u as C}from"./vue-router-84e2bdc9.js";import{z as q}from"./index-f4ddbc8d.js";import{b as x,Q as b,k as B,o as E,l as F,a as n,w as c,z as K,m as i,r as _}from"./runtime-core.esm-bundler-c02bc754.js";function N(d){return["admin","editor"].indexOf(d.trim())>=0}const P={class:"login-container"},S=i("div",{class:"title-container"},[i("h3",{class:"title"},"System Login")],-1),L=i("div",{class:"tips"},[i("span",{style:{"margin-right":"20px"}},"username: admin"),i("span",null,"password: any")],-1),j={__name:"index",setup(d){const u=q(),{currentRoute:r,replace:f}=C(),m=(l,a,s)=>{N(a)?s():s(new Error("Please enter the correct user name"))},v=(l,a,s)=>{a.length<6?s(new Error("The password can not be less than 6 digits")):s()},p=x(),e=b({username:"admin",password:"111111"}),o=b({username:[{required:!0,validator:m}],password:[{required:!0,validator:v}]}),t=x(!1),V=B(()=>r.value.query.redirect);function w(){return h(this,null,function*(){try{t.value=!0,(yield p.value.validate())&&(console.log("submit!"),yield u.login(e),yield f({path:V.value||"/"}),t.value=!1)}catch(l){console.log("error submit!",l),t.value=!1}})}return(l,a)=>{const s=_("el-input"),y=_("el-form-item"),U=_("el-button"),R=_("el-form");return E(),F("div",P,[n(R,{ref_key:"loginFormRef",ref:p,model:e,rules:o,class:"login-form","auto-complete":"on","label-position":"left",size:"large"},{default:c(()=>[S,n(y,{prop:"username"},{default:c(()=>[n(s,{modelValue:e.username,"onUpdate:modelValue":a[0]||(a[0]=g=>e.username=g),placeholder:"Username",name:"username",type:"text",tabindex:"1","auto-complete":"on",clearable:""},null,8,["modelValue"])]),_:1}),n(y,{prop:"password"},{default:c(()=>[n(s,{modelValue:e.password,"onUpdate:modelValue":a[1]||(a[1]=g=>e.password=g),type:"password",placeholder:"Password",name:"password",tabindex:"2","auto-complete":"on","show-password":"",clearable:"",onKeyup:k(w,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),n(U,{loading:t.value,type:"primary",size:"large",style:{width:"100%","margin-bottom":"30px"},onClick:z(w,["prevent"])},{default:c(()=>[K(" Login ")]),_:1},8,["loading","onClick"]),L]),_:1},8,["model","rules"])])}}};export{j as default};
